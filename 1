prosto-pogovory/
 ‚îú‚îÄ‚îÄ server.js
 ‚îú‚îÄ‚îÄ package.json
 ‚îî‚îÄ‚îÄ public/
     ‚îú‚îÄ‚îÄ index.html
     ‚îî‚îÄ‚îÄ admin.html
import express from "express";
import { WebSocketServer } from "ws";
import { createServer } from "http";

const app = express();
const server = createServer(app);
const wss = new WebSocketServer({ server });

let clients = new Set(); // –ø—ñ–¥–∫–ª—é—á–µ–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ
let admin = null;        // —Ç–∏ —è–∫ "–∞–¥–º—ñ–Ω"

app.use(express.static("public"));

wss.on("connection", (ws, req) => {
  const url = req.url;

  if (url.includes("admin")) {
    admin = ws;
    ws.send("‚úÖ –í–∏ –ø—ñ–¥–∫–ª—é—á–∏–ª–∏—Å—å —è–∫ –ê–¥–º—ñ–Ω");
  } else {
    clients.add(ws);
    ws.send("üëã –í–∏ –ø—ñ–¥–∫–ª—é—á–µ–Ω—ñ. –ó–∞—á–µ–∫–∞–π—Ç–µ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –≤—ñ–¥ –ê–¥–º—ñ–Ω–∞.");

    if (admin) {
      admin.send("üü¢ –ù–æ–≤–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –ø—ñ–¥–∫–ª—é—á–∏–≤—Å—è.");
    }
  }

  ws.on("message", (msg) => {
    if (ws === admin) {
      // –ê–¥–º—ñ–Ω –ø–∏—à–µ ‚Üí –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è –≤—Å—ñ–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º
      clients.forEach(c => c.send(`üë®‚Äçüíª –ê–¥–º—ñ–Ω: ${msg}`));
    } else {
      // –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –ø–∏—à–µ ‚Üí –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –±–∞—á–∏—Ç—å —Ç—ñ–ª—å–∫–∏ –∞–¥–º—ñ–Ω
      if (admin) {
        admin.send(`üó£ –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á: ${msg}`);
      }
    }
  });

  ws.on("close", () => {
    clients.delete(ws);
    if (ws === admin) admin = null;
  });
});

const PORT = process.env.PORT || 3000;
server.listen(PORT, () => console.log(`–°–µ—Ä–≤–µ—Ä –ø—Ä–∞—Ü—é—î –Ω–∞ –ø–æ—Ä—Ç—É ${PORT}`));
{
  "name": "prosto-pogovory",
  "version": "1.0.0",
  "type": "module",
  "main": "server.js",
  "scripts": {
    "start": "node server.js"
  },
  "dependencies": {
    "express": "^4.18.2",
    "ws": "^8.14.2"
  }
}
<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <title>–ü—Ä–æ—Å—Ç–æ –ø–æ–≥–æ–≤–æ—Ä–∏</title>
</head>
<body>
  <h2>–ü—Ä–æ—Å—Ç–æ –ø–æ–≥–æ–≤–æ—Ä–∏ üòä</h2>
  <div id="chat"></div>
  <input id="msg" placeholder="–ù–∞–ø–∏—à—ñ—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è...">
  <button onclick="send()">–í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏</button>

  <script>
    const ws = new WebSocket(`wss://${location.host}`);
    const chat = document.getElementById("chat");

    ws.onmessage = e => {
      const div = document.createElement("div");
      div.textContent = e.data;
      chat.appendChild(div);
    };

    function send() {
      ws.send(document.getElementById("msg").value);
      document.getElementById("msg").value = "";
    }
  </script>
</body>
</html>
<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <title>–ê–¥–º—ñ–Ω ‚Äî –ü—Ä–æ—Å—Ç–æ –ø–æ–≥–æ–≤–æ—Ä–∏</title>
</head>
<body>
  <h2>–ê–¥–º—ñ–Ω-—á–∞—Ç</h2>
  <div id="chat"></div>
  <input id="msg" placeholder="–ù–∞–ø–∏—à—ñ—Ç—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É...">
  <button onclick="send()">–í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏</button>

  <script>
    const ws = new WebSocket(`wss://${location.host}/admin`);
    const chat = document.getElementById("chat");

    ws.onmessage = e => {
      const div = document.createElement("div");
      div.textContent = e.data;
      chat.appendChild(div);
    };

    function send() {
      ws.send(document.getElementById("msg").value);
      document.getElementById("msg").value = "";
    }
  </script>
</body>
</html>
